/* ============================================
   PRINT & PDF FIX - Complete Solution
   Improved for cross-browser compatibility
   ============================================ */

   @media print {
    /* Reset body and html for printing */
    @page {
      size: A4 portrait;
      margin: 15mm 10mm;
    }
  
    html, body {
      width: 100% !important;
      height: auto !important;
      margin: 0 !important;
      padding: 0 !important;
      overflow: visible !important;
      background: white !important;
      -webkit-print-color-adjust: exact !important;
      print-color-adjust: exact !important;
      color-adjust: exact !important;
    }
  
    /* Hide everything except printable invoice */
    body > *:not(#printable-invoice):not(script):not(style) {
      display: none !important;
    }
  
    /* Show only printable invoice */
    #printable-invoice {
      display: block !important;
      visibility: visible !important;
      position: static !important;
      left: auto !important;
      top: auto !important;
      width: 100% !important;
      max-width: 100% !important;
      margin: 0 !important;
      padding: 20px !important;
      background: white !important;
      page-break-inside: avoid !important;
      box-shadow: none !important;
    }
    
    /* Ensure ALL descendants are visible */
    #printable-invoice,
    #printable-invoice *,
    #printable-invoice *::before,
    #printable-invoice *::after {
      visibility: visible !important;
      color: inherit !important;
    }
    
    /* Preserve flex layouts */
    #printable-invoice .MuiStack-root,
    #printable-invoice .invoice-header-details,
    #printable-invoice .invoice-totals,
    #printable-invoice .MuiBox-root[style*="display: flex"],
    #printable-invoice .MuiBox-root[style*="display:flex"] {
      display: flex !important;
    }
    
    /* Table display types */
    #printable-invoice table,
    #printable-invoice .MuiTable-root {
      display: table !important;
    }
    
    #printable-invoice .MuiTableRow-root {
      display: table-row !important;
    }
    
    #printable-invoice .MuiTableCell-root {
      display: table-cell !important;
    }
  
    /* Hide non-printable elements */
    .no-print,
    button:not(.print-button),
    .MuiButton-root:not(.print-button),
    .MuiIconButton-root,
    .MuiTabs-root,
    .MuiTab-root,
    .MuiChip-root:not(.print-chip),
    .MuiAppBar-root,
    .MuiDrawer-root,
    .MuiFab-root,
    .MuiDialog-root:not(#printable-invoice *),
    .MuiBackdrop-root,
    .MuiSnackbar-root {
      display: none !important;
    }
  
    /* Reset Material-UI components for print */
    #printable-invoice .MuiBox-root {
      box-shadow: none !important;
      border-radius: 0 !important;
      background: transparent !important;
    }
  
    #printable-invoice .MuiCard-root,
    #printable-invoice .MuiCardContent-root,
    #printable-invoice .MuiPaper-root {
      box-shadow: none !important;
      border-radius: 0 !important;
      background: transparent !important;
      display: block !important;
    }
  
    /* Table styling for print */
    table {
      width: 100% !important;
      border-collapse: collapse !important;
    }
  
    th, td,
    .MuiTableCell-root {
      padding: 8px 10px !important;
      font-size: 11px !important;
      border: 1px solid #ddd !important;
      background: white !important;
    }
  
    th,
    .MuiTableCell-head {
      background: #f5f5f5 !important;
      font-weight: 600 !important;
      -webkit-print-color-adjust: exact !important;
      print-color-adjust: exact !important;
    }
  
    /* Typography for print */
    h1, h2, h3, h4, h5, h6 {
      page-break-after: avoid !important;
      margin-top: 0 !important;
    }
  
    p {
      orphans: 3 !important;
      widows: 3 !important;
    }
  
    /* Invoice-specific styling */
    .invoice-totals {
      margin-top: 20px !important;
      padding: 12px !important;
      background: #fafafa !important;
      -webkit-print-color-adjust: exact !important;
      print-color-adjust: exact !important;
    }
  
    .invoice-notes {
      margin-top: 20px !important;
      padding: 12px !important;
      background: #fafafa !important;
      border-left: 4px solid #2196f3 !important;
      -webkit-print-color-adjust: exact !important;
      print-color-adjust: exact !important;
    }
  
    /* Remove animations */
    * {
      animation: none !important;
      transition: none !important;
    }
  }
  
  .print-only {
    display: none;
  }
  
  #printable-invoice {
    position: relative;
    width: 100%;
    max-width: 1200px;
    margin: 0 auto;
    background: white;
  }
  
  .invoice-box.print-template {
    font-family: 'Segoe UI', 'Arial', sans-serif;
    background: #fff;
    max-width: 800px;
    margin: auto;
    padding: 24px;
    border: 1px solid #eee;
    border-radius: 10px;
    box-shadow: 0 0 8px #ccc;
    color: #222;
  }
  
  .invoice-header {
    margin-bottom: 24px;
    padding-bottom: 16px;
    border-bottom: 2px solid #eee;
  }
  
  .invoice-logo {
    font-size: 2rem;
    font-weight: 700;
    color: #2196f3;
    margin-bottom: 8px;
  }
  
  .invoice-table {
    background: #fff;
    margin: 20px 0;
  }
  
  .invoice-table .MuiTableHead-root th {
    background: #f4f4f4;
    font-weight: 700;
    border-bottom: 2px solid #ddd;
    padding: 12px 10px;
  }
  
  .invoice-totals {
    margin-top: 20px;
    padding: 16px;
    background: #fafafa;
    border-radius: 8px;
  }
  
  .invoice-notes {
    background: #fafafa;
    border-left: 4px solid #2196f3;
    padding: 12px 16px;
    margin-top: 20px;
    border-radius: 4px;
  }
  
  @media screen and (max-width: 768px) {
    .invoice-box.print-template {
      padding: 16px;
      margin: 16px;
    }
  }